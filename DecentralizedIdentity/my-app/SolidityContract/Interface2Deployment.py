from web3 import Web3

contract_bytecode = "608060405234801561000f575f80fd5b506116448061001d5f395ff3fe608060405234801561000f575f80fd5b50600436106100b2575f3560e01c80638c9a2e921161006f5780638c9a2e9214610176578063beb8727f146101a6578063bf501844146101d6578063ccca8f2214610206578063ee7476d514610236578063f7ffd62514610252576100b2565b806301dadb2b146100b65780630d60fafd146100d257806327897557146100ee5780635a7fb9d71461010a578063689e1c0314610126578063892d069c1461015a575b5f80fd5b6100d060048036038101906100cb9190610e70565b610282565b005b6100ec60048036038101906100e79190610fa1565b610425565b005b61010860048036038101906101039190610fa1565b6104a7565b005b610124600480360381019061011f9190610fa1565b610529565b005b610140600480360381019061013b9190611017565b6105c5565b6040516101519594939291906110d8565b60405180910390f35b610174600480360381019061016f9190610fa1565b6108ac565b005b610190600480360381019061018b9190611017565b61092e565b60405161019d919061114c565b60405180910390f35b6101c060048036038101906101bb9190611017565b6109de565b6040516101cd919061114c565b60405180910390f35b6101f060048036038101906101eb9190611017565b610a8e565b6040516101fd919061114c565b60405180910390f35b610220600480360381019061021b9190611017565b610b41565b60405161022d919061114c565b60405180910390f35b610250600480360381019061024b9190610fa1565b610bf1565b005b61026c60048036038101906102679190611017565b610c73565b604051610279919061114c565b60405180910390f35b5f808760405161029291906111a6565b90815260200160405180910390205f0180546102ad906111e9565b9050146102ef576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102e690611263565b60405180910390fd5b5f60018260405161030091906111a6565b90815260200160405180910390208054610319906111e9565b90501461035b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610352906112cb565b60405180910390fd5b5f6040518060a00160405280888152602001878152602001868152602001858152602001848152509050805f8860405161039591906111a6565b90815260200160405180910390205f820151815f0190816103b6919061148f565b5060208201518160010190816103cc919061148f565b5060408201518160020190816103e2919061148f565b5060608201518160030190816103f8919061148f565b50608082015181600401908161040e919061148f565b5090505061041c8288610529565b50505050505050565b805f8360405161043591906111a6565b90815260200160405180910390206003019081610452919061148f565b508160405161046191906111a6565b60405180910390207fa44feca31ca2b9cda9b6dec473fbbc131c350db90a2f95915bcd051cdc5e10ba82600160405161049b929190611578565b60405180910390a25050565b805f836040516104b791906111a6565b908152602001604051809103902060010190816104d4919061148f565b50816040516104e391906111a6565b60405180910390207fa76f1708714ecb5aed9ae4c006eafbf67941b726bb287f861c599f2286fdf77882600160405161051d929190611578565b60405180910390a25050565b5f60018360405161053a91906111a6565b90815260200160405180910390208054610553906111e9565b905014610595576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161058c906115f0565b60405180910390fd5b806001836040516105a691906111a6565b908152602001604051809103902090816105c0919061148f565b505050565b5f818051602081018201805184825260208301602085012081835280955050505050505f91509050805f0180546105fb906111e9565b80601f0160208091040260200160405190810160405280929190818152602001828054610627906111e9565b80156106725780601f1061064957610100808354040283529160200191610672565b820191905f5260205f20905b81548152906001019060200180831161065557829003601f168201915b505050505090806001018054610687906111e9565b80601f01602080910402602001604051908101604052809291908181526020018280546106b3906111e9565b80156106fe5780601f106106d5576101008083540402835291602001916106fe565b820191905f5260205f20905b8154815290600101906020018083116106e157829003601f168201915b505050505090806002018054610713906111e9565b80601f016020809104026020016040519081016040528092919081815260200182805461073f906111e9565b801561078a5780601f106107615761010080835404028352916020019161078a565b820191905f5260205f20905b81548152906001019060200180831161076d57829003601f168201915b50505050509080600301805461079f906111e9565b80601f01602080910402602001604051908101604052809291908181526020018280546107cb906111e9565b80156108165780601f106107ed57610100808354040283529160200191610816565b820191905f5260205f20905b8154815290600101906020018083116107f957829003601f168201915b50505050509080600401805461082b906111e9565b80601f0160208091040260200160405190810160405280929190818152602001828054610857906111e9565b80156108a25780601f10610879576101008083540402835291602001916108a2565b820191905f5260205f20905b81548152906001019060200180831161088557829003601f168201915b5050505050905085565b805f836040516108bc91906111a6565b908152602001604051809103902060020190816108d9919061148f565b50816040516108e891906111a6565b60405180910390207f480bdec02bf73c6c075a8db62d725863401ec6d719a3ff0c25b87ac13569c5f2826001604051610922929190611578565b60405180910390a25050565b60605f8260405161093f91906111a6565b9081526020016040518091039020600101805461095b906111e9565b80601f0160208091040260200160405190810160405280929190818152602001828054610987906111e9565b80156109d25780601f106109a9576101008083540402835291602001916109d2565b820191905f5260205f20905b8154815290600101906020018083116109b557829003601f168201915b50505050509050919050565b60605f826040516109ef91906111a6565b90815260200160405180910390206004018054610a0b906111e9565b80601f0160208091040260200160405190810160405280929190818152602001828054610a37906111e9565b8015610a825780601f10610a5957610100808354040283529160200191610a82565b820191905f5260205f20905b815481529060010190602001808311610a6557829003601f168201915b50505050509050919050565b6001818051602081018201805184825260208301602085012081835280955050505050505f915090508054610ac2906111e9565b80601f0160208091040260200160405190810160405280929190818152602001828054610aee906111e9565b8015610b395780601f10610b1057610100808354040283529160200191610b39565b820191905f5260205f20905b815481529060010190602001808311610b1c57829003601f168201915b505050505081565b60605f82604051610b5291906111a6565b90815260200160405180910390206003018054610b6e906111e9565b80601f0160208091040260200160405190810160405280929190818152602001828054610b9a906111e9565b8015610be55780601f10610bbc57610100808354040283529160200191610be5565b820191905f5260205f20905b815481529060010190602001808311610bc857829003601f168201915b50505050509050919050565b805f83604051610c0191906111a6565b90815260200160405180910390206004019081610c1e919061148f565b5081604051610c2d91906111a6565b60405180910390207fae584fab5e8f7cfd659e7b4c2d09184ef8d88c791a136a070039ae4c135b8ec7826001604051610c67929190611578565b60405180910390a25050565b60605f82604051610c8491906111a6565b90815260200160405180910390206002018054610ca0906111e9565b80601f0160208091040260200160405190810160405280929190818152602001828054610ccc906111e9565b8015610d175780601f10610cee57610100808354040283529160200191610d17565b820191905f5260205f20905b815481529060010190602001808311610cfa57829003601f168201915b50505050509050919050565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b610d8282610d3c565b810181811067ffffffffffffffff82111715610da157610da0610d4c565b5b80604052505050565b5f610db3610d23565b9050610dbf8282610d79565b919050565b5f67ffffffffffffffff821115610dde57610ddd610d4c565b5b610de782610d3c565b9050602081019050919050565b828183375f83830152505050565b5f610e14610e0f84610dc4565b610daa565b905082815260208101848484011115610e3057610e2f610d38565b5b610e3b848285610df4565b509392505050565b5f82601f830112610e5757610e56610d34565b5b8135610e67848260208601610e02565b91505092915050565b5f805f805f8060c08789031215610e8a57610e89610d2c565b5b5f87013567ffffffffffffffff811115610ea757610ea6610d30565b5b610eb389828a01610e43565b965050602087013567ffffffffffffffff811115610ed457610ed3610d30565b5b610ee089828a01610e43565b955050604087013567ffffffffffffffff811115610f0157610f00610d30565b5b610f0d89828a01610e43565b945050606087013567ffffffffffffffff811115610f2e57610f2d610d30565b5b610f3a89828a01610e43565b935050608087013567ffffffffffffffff811115610f5b57610f5a610d30565b5b610f6789828a01610e43565b92505060a087013567ffffffffffffffff811115610f8857610f87610d30565b5b610f9489828a01610e43565b9150509295509295509295565b5f8060408385031215610fb757610fb6610d2c565b5b5f83013567ffffffffffffffff811115610fd457610fd3610d30565b5b610fe085828601610e43565b925050602083013567ffffffffffffffff81111561100157611000610d30565b5b61100d85828601610e43565b9150509250929050565b5f6020828403121561102c5761102b610d2c565b5b5f82013567ffffffffffffffff81111561104957611048610d30565b5b61105584828501610e43565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f5b8381101561109557808201518184015260208101905061107a565b5f8484015250505050565b5f6110aa8261105e565b6110b48185611068565b93506110c4818560208601611078565b6110cd81610d3c565b840191505092915050565b5f60a0820190508181035f8301526110f081886110a0565b9050818103602083015261110481876110a0565b9050818103604083015261111881866110a0565b9050818103606083015261112c81856110a0565b9050818103608083015261114081846110a0565b90509695505050505050565b5f6020820190508181035f83015261116481846110a0565b905092915050565b5f81905092915050565b5f6111808261105e565b61118a818561116c565b935061119a818560208601611078565b80840191505092915050565b5f6111b18284611176565b915081905092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061120057607f821691505b602082108103611213576112126111bc565b5b50919050565b7f5573657220616c726561647920657869737473000000000000000000000000005f82015250565b5f61124d601383611068565b915061125882611219565b602082019050919050565b5f6020820190508181035f83015261127a81611241565b9050919050565b7f50726976617465206b657920616c726561647920696e207573650000000000005f82015250565b5f6112b5601a83611068565b91506112c082611281565b602082019050919050565b5f6020820190508181035f8301526112e2816112a9565b9050919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026113457fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261130a565b61134f868361130a565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61139361138e61138984611367565b611370565b611367565b9050919050565b5f819050919050565b6113ac83611379565b6113c06113b88261139a565b848454611316565b825550505050565b5f90565b6113d46113c8565b6113df8184846113a3565b505050565b5b81811015611402576113f75f826113cc565b6001810190506113e5565b5050565b601f82111561144757611418816112e9565b611421846112fb565b81016020851015611430578190505b61144461143c856112fb565b8301826113e4565b50505b505050565b5f82821c905092915050565b5f6114675f198460080261144c565b1980831691505092915050565b5f61147f8383611458565b9150826002028217905092915050565b6114988261105e565b67ffffffffffffffff8111156114b1576114b0610d4c565b5b6114bb82546111e9565b6114c6828285611406565b5f60209050601f8311600181146114f7575f84156114e5578287015190505b6114ef8582611474565b865550611556565b601f198416611505866112e9565b5f5b8281101561152c57848901518255600182019150602085019450602081019050611507565b868310156115495784890151611545601f891682611458565b8355505b6001600288020188555050505b505050505050565b5f8115159050919050565b6115728161155e565b82525050565b5f6040820190508181035f83015261159081856110a0565b905061159f6020830184611569565b9392505050565b7f50726976617465206b657920616c7265616479206d61707065640000000000005f82015250565b5f6115da601a83611068565b91506115e5826115a6565b602082019050919050565b5f6020820190508181035f830152611607816115ce565b905091905056fea264697066735822122074e4791819ec038e196e6759a5efa9b4fe56773b1570191f86ccce072d45484e64736f6c63430008160033"


contract_abi = [
	{
		"anonymous": False,
		"inputs": [
			{
				"indexed": True,
				"internalType": "string",
				"name": "userAddress",
				"type": "string"
			},
			{
				"indexed": False,
				"internalType": "string",
				"name": "newContact",
				"type": "string"
			},
			{
				"indexed": False,
				"internalType": "bool",
				"name": "success",
				"type": "bool"
			}
		],
		"name": "ContactUpdated",
		"type": "event"
	},
	{
		"anonymous": False,
		"inputs": [
			{
				"indexed": True,
				"internalType": "string",
				"name": "userAddress",
				"type": "string"
			},
			{
				"indexed": False,
				"internalType": "string",
				"name": "newDOB",
				"type": "string"
			},
			{
				"indexed": False,
				"internalType": "bool",
				"name": "success",
				"type": "bool"
			}
		],
		"name": "DOBUpdated",
		"type": "event"
	},
	{
		"anonymous": False,
		"inputs": [
			{
				"indexed": True,
				"internalType": "string",
				"name": "userAddress",
				"type": "string"
			},
			{
				"indexed": False,
				"internalType": "string",
				"name": "newEmail",
				"type": "string"
			},
			{
				"indexed": False,
				"internalType": "bool",
				"name": "success",
				"type": "bool"
			}
		],
		"name": "EmailUpdated",
		"type": "event"
	},
	{
		"anonymous": False,
		"inputs": [
			{
				"indexed": True,
				"internalType": "string",
				"name": "userAddress",
				"type": "string"
			},
			{
				"indexed": False,
				"internalType": "string",
				"name": "newUsername",
				"type": "string"
			},
			{
				"indexed": False,
				"internalType": "bool",
				"name": "success",
				"type": "bool"
			}
		],
		"name": "UsernameUpdated",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_email",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_username",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_contact",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_dob",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_privateKey",
				"type": "string"
			}
		],
		"name": "createUser",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			}
		],
		"name": "getContactByAddress",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			}
		],
		"name": "getDOBByAddress",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			}
		],
		"name": "getEmailByAddress",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			}
		],
		"name": "getUsernameByAddress",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_privateKey",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			}
		],
		"name": "mapPrivateKeyToPublicKey",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"name": "privateKeyToPublicKey",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_newContact",
				"type": "string"
			}
		],
		"name": "updateContact",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_newDOB",
				"type": "string"
			}
		],
		"name": "updateDOB",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_newEmail",
				"type": "string"
			}
		],
		"name": "updateEmail",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_userAddress",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_newUsername",
				"type": "string"
			}
		],
		"name": "updateUsername",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"name": "users",
		"outputs": [
			{
				"internalType": "string",
				"name": "userAddress",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "email",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "username",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "contact",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "dob",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
]



# deploying the contract


# Ethereum node endpoint (replace with your own endpoint)
ethereum_node_url = "https://goerli.infura.io/v3/b4e87e31b3df4aba9f33d76ec45a139d"

# Account private key (replace with your own private key)
private_key = "7fd14eed812ee800b2e7d536090d5d514a2341bea36b04efba90a8d9abaf94b1"

# Connect to the Ethereum node
w3 = Web3(Web3.HTTPProvider(ethereum_node_url))

account = "0x5780326e9F221afd01253C954b453ccCf4f2F30E"

# Build the contract
contract = w3.eth.contract(abi=contract_abi, bytecode=contract_bytecode)

# Estimate gas for the constructor
gas_estimate = contract.constructor().estimate_gas()

# Build the transaction
construct_txn = contract.constructor().build_transaction({
    'from': account,
    'gas':int(gas_estimate),
    'gasPrice': w3.to_wei('20', 'gwei'),
    'nonce': w3.eth.get_transaction_count(account),
})

# Sign the transaction
signed_txn = w3.eth.account.sign_transaction(construct_txn, private_key)

# Send the transaction
transaction_hash = w3.eth.send_raw_transaction(signed_txn.rawTransaction)

# Wait for the transaction to be mined
transaction_receipt = w3.eth.wait_for_transaction_receipt(transaction_hash, )

# Get the deployed contract address
contract_address = transaction_receipt['contractAddress']

print("Contract deployed at address:", contract_address)